{
  if (indeterminate) {
    new MaterialDialog.Builder(this).content(R.string.please_wait).progress(true,0).show();
  }
 else {
    new MaterialDialog.Builder(this).content(R.string.please_wait).contentGravity(GravityEnum.CENTER).progress(false,150,true).showListener(new DialogInterface.OnShowListener(){
      @Override public void onShow(      DialogInterface dialogInterface){
        final MaterialDialog dialog=(MaterialDialog)dialogInterface;
        new Thread(new Runnable(){
          @Override public void run(){
            while (dialog.getCurrentProgress() != dialog.getMaxProgress()) {
              if (dialog.isCancelled())               break;
              try {
                Thread.sleep(50);
              }
 catch (              InterruptedException e) {
                break;
              }
              runOnUiThread(new Runnable(){
                @Override public void run(){
                  dialog.incrementProgress(1);
                }
              }
);
            }
            runOnUiThread(new Runnable(){
              @Override public void run(){
                dialog.setContent(getString(R.string.done));
              }
            }
);
          }
        }
).start();
      }
    }
).show();
  }
}
