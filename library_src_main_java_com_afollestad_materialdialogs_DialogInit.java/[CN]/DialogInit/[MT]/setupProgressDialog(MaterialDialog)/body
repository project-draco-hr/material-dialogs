{
  final MaterialDialog.Builder builder=dialog.mBuilder;
  if (builder.mIndeterminateProgress || builder.mProgress > -2) {
    dialog.mProgress=(ProgressBar)dialog.view.findViewById(android.R.id.progress);
    Drawable indDraw=dialog.mProgress.getIndeterminateDrawable();
    if (indDraw != null) {
      indDraw.setColorFilter(builder.progressColor,PorterDuff.Mode.SRC_ATOP);
      dialog.mProgress.setIndeterminateDrawable(indDraw);
    }
    Drawable regDraw=dialog.mProgress.getProgressDrawable();
    if (regDraw != null) {
      regDraw.setColorFilter(builder.progressColor,PorterDuff.Mode.SRC_ATOP);
      dialog.mProgress.setProgressDrawable(regDraw);
    }
    if (!builder.mIndeterminateProgress) {
      dialog.mProgress.setProgress(0);
      dialog.mProgress.setMax(builder.mProgressMax);
      dialog.mProgressLabel=(TextView)dialog.view.findViewById(R.id.label);
      dialog.mProgressMinMax=(TextView)dialog.view.findViewById(R.id.minMax);
      if (builder.mShowMinMax) {
        dialog.mProgressMinMax.setVisibility(View.VISIBLE);
        dialog.mProgressMinMax.setText("0/" + builder.mProgressMax);
        ViewGroup.MarginLayoutParams lp=(ViewGroup.MarginLayoutParams)dialog.mProgress.getLayoutParams();
        lp.leftMargin=0;
        lp.rightMargin=0;
      }
 else {
        dialog.mProgressMinMax.setVisibility(View.GONE);
      }
      dialog.mProgressLabel.setText("0%");
    }
  }
}
