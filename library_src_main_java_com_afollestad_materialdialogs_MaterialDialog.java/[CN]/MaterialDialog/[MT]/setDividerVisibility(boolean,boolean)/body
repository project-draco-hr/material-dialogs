{
  topVisible=topVisible && titleFrame.getVisibility() == View.VISIBLE;
  bottomVisible=bottomVisible && hasActionButtons();
  if (mBuilder.dividerColor == 0)   mBuilder.dividerColor=DialogUtils.resolveColor(mBuilder.context,R.attr.md_divider_color);
  if (mBuilder.dividerColor == 0)   mBuilder.dividerColor=DialogUtils.resolveColor(getContext(),R.attr.md_divider);
  View titleBarDivider=view.findViewById(R.id.titleBarDivider);
  if (topVisible) {
    titleBarDivider.setVisibility(View.VISIBLE);
    titleBarDivider.setBackgroundColor(mBuilder.dividerColor);
  }
 else {
    titleBarDivider.setVisibility(View.GONE);
  }
  View buttonBarDivider=view.findViewById(R.id.buttonBarDivider);
  if (bottomVisible) {
    buttonBarDivider.setVisibility(View.VISIBLE);
    buttonBarDivider.setBackgroundColor(mBuilder.dividerColor);
    setVerticalMargins(view.findViewById(R.id.buttonStackedFrame),0,0);
    setVerticalMargins(view.findViewById(R.id.buttonDefaultFrame),0,0);
  }
 else {
    Resources r=getContext().getResources();
    buttonBarDivider.setVisibility(View.GONE);
    final int bottomMargin=r.getDimensionPixelSize(R.dimen.md_button_frame_vertical_padding);
    Rect maxWindowFrame=new Rect();
    getWindow().getDecorView().getWindowVisibleDisplayFrame(maxWindowFrame);
    int currentHeight=getWindow().getDecorView().getMeasuredHeight();
    if (currentHeight + bottomMargin < maxWindowFrame.height()) {
      setVerticalMargins(view.findViewById(R.id.buttonStackedFrame),bottomMargin,bottomMargin);
      setVerticalMargins(view.findViewById(R.id.buttonDefaultFrame),bottomMargin,bottomMargin);
    }
  }
}
