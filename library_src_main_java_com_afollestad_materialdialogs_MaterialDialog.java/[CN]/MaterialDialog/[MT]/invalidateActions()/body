{
  if (!hasActionButtons()) {
    view.findViewById(R.id.buttonDefaultFrame).setVisibility(View.GONE);
    view.findViewById(R.id.buttonStackedFrame).setVisibility(View.GONE);
    invalidateList();
    return false;
  }
  if (isStacked) {
    view.findViewById(R.id.buttonDefaultFrame).setVisibility(View.GONE);
    view.findViewById(R.id.buttonStackedFrame).setVisibility(View.VISIBLE);
  }
 else {
    view.findViewById(R.id.buttonDefaultFrame).setVisibility(View.VISIBLE);
    view.findViewById(R.id.buttonStackedFrame).setVisibility(View.GONE);
  }
  positiveButton=view.findViewById(isStacked ? R.id.buttonStackedPositive : R.id.buttonDefaultPositive);
  if (mBuilder.positiveText != null && positiveButton.getVisibility() == View.VISIBLE) {
    TextView positiveTextView=(TextView)((FrameLayout)positiveButton).getChildAt(0);
    setTypeface(positiveTextView,mBuilder.mediumFont);
    positiveTextView.setText(mBuilder.positiveText);
    positiveTextView.setTextColor(getActionTextStateList(mBuilder.positiveColor));
    setBackgroundCompat(positiveButton,getButtonSelector(DialogAction.POSITIVE));
    positiveButton.setTag(POSITIVE);
    positiveButton.setOnClickListener(this);
    if (isStacked) {
      positiveTextView.setGravity(gravityEnumToGravity(mBuilder.btnStackedGravity));
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        positiveTextView.setTextAlignment(gravityEnumToTextAlignment(mBuilder.btnStackedGravity));
      }
    }
 else {
      RelativeLayout.LayoutParams params=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,(int)getContext().getResources().getDimension(R.dimen.md_button_height));
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        params.addRule(mBuilder.buttonsGravity == GravityEnum.START || mBuilder.buttonsGravity == GravityEnum.CENTER ? RelativeLayout.ALIGN_PARENT_END : RelativeLayout.ALIGN_PARENT_START);
      }
 else {
        params.addRule(mBuilder.buttonsGravity == GravityEnum.START || mBuilder.buttonsGravity == GravityEnum.CENTER ? RelativeLayout.ALIGN_PARENT_RIGHT : RelativeLayout.ALIGN_PARENT_LEFT);
      }
      positiveButton.setLayoutParams(params);
    }
  }
  neutralButton=view.findViewById(isStacked ? R.id.buttonStackedNeutral : R.id.buttonDefaultNeutral);
  if (mBuilder.neutralText != null && neutralButton.getVisibility() == View.VISIBLE) {
    TextView neutralTextView=(TextView)((FrameLayout)neutralButton).getChildAt(0);
    setTypeface(neutralTextView,mBuilder.mediumFont);
    neutralTextView.setTextColor(getActionTextStateList(mBuilder.neutralColor));
    setBackgroundCompat(neutralButton,getButtonSelector(DialogAction.NEUTRAL));
    neutralTextView.setText(mBuilder.neutralText);
    neutralButton.setTag(NEUTRAL);
    neutralButton.setOnClickListener(this);
    if (isStacked) {
      neutralTextView.setGravity(gravityEnumToGravity(mBuilder.btnStackedGravity));
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        neutralTextView.setTextAlignment(gravityEnumToTextAlignment(mBuilder.btnStackedGravity));
      }
    }
 else {
      RelativeLayout.LayoutParams params=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,(int)getContext().getResources().getDimension(R.dimen.md_button_height));
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        if (mBuilder.buttonsGravity == GravityEnum.CENTER) {
          params.addRule(RelativeLayout.CENTER_HORIZONTAL);
          params.addRule(RelativeLayout.START_OF,R.id.buttonDefaultPositive);
          params.addRule(RelativeLayout.END_OF,R.id.buttonDefaultNegative);
          ((FrameLayout.LayoutParams)neutralTextView.getLayoutParams()).gravity=Gravity.CENTER;
        }
 else {
          params.addRule(mBuilder.buttonsGravity == GravityEnum.START ? RelativeLayout.ALIGN_PARENT_START : RelativeLayout.ALIGN_PARENT_END);
        }
      }
 else {
        if (mBuilder.buttonsGravity == GravityEnum.CENTER) {
          params.addRule(RelativeLayout.CENTER_HORIZONTAL);
          params.addRule(RelativeLayout.LEFT_OF,R.id.buttonDefaultPositive);
          params.addRule(RelativeLayout.RIGHT_OF,R.id.buttonDefaultNegative);
          neutralTextView.setGravity(Gravity.CENTER_HORIZONTAL);
        }
 else {
          params.addRule(mBuilder.buttonsGravity == GravityEnum.START ? RelativeLayout.ALIGN_PARENT_LEFT : RelativeLayout.ALIGN_PARENT_RIGHT);
        }
      }
      neutralButton.setLayoutParams(params);
    }
  }
  negativeButton=view.findViewById(isStacked ? R.id.buttonStackedNegative : R.id.buttonDefaultNegative);
  if (mBuilder.negativeText != null && negativeButton.getVisibility() == View.VISIBLE) {
    TextView negativeTextView=(TextView)((FrameLayout)negativeButton).getChildAt(0);
    setTypeface(negativeTextView,mBuilder.mediumFont);
    negativeTextView.setTextColor(getActionTextStateList(mBuilder.negativeColor));
    setBackgroundCompat(negativeButton,getButtonSelector(DialogAction.NEGATIVE));
    negativeTextView.setText(mBuilder.negativeText);
    negativeButton.setTag(NEGATIVE);
    negativeButton.setOnClickListener(this);
    if (isStacked) {
      negativeTextView.setGravity(gravityEnumToGravity(mBuilder.btnStackedGravity));
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        negativeTextView.setTextAlignment(gravityEnumToTextAlignment(mBuilder.btnStackedGravity));
      }
    }
 else {
      RelativeLayout.LayoutParams params=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,(int)getContext().getResources().getDimension(R.dimen.md_button_height));
      if (mBuilder.buttonsGravity == GravityEnum.CENTER) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1)         params.addRule(RelativeLayout.ALIGN_PARENT_START);
 else         params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
      }
 else {
        if (mBuilder.positiveText != null && positiveButton.getVisibility() == View.VISIBLE) {
          if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
            params.addRule(mBuilder.buttonsGravity == GravityEnum.START ? RelativeLayout.START_OF : RelativeLayout.END_OF,R.id.buttonDefaultPositive);
          }
 else {
            params.addRule(mBuilder.buttonsGravity == GravityEnum.START ? RelativeLayout.LEFT_OF : RelativeLayout.RIGHT_OF,R.id.buttonDefaultPositive);
          }
        }
 else {
          if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
            params.addRule(mBuilder.buttonsGravity == GravityEnum.START ? RelativeLayout.ALIGN_PARENT_END : RelativeLayout.ALIGN_PARENT_START);
          }
 else {
            params.addRule(mBuilder.buttonsGravity == GravityEnum.START ? RelativeLayout.ALIGN_PARENT_RIGHT : RelativeLayout.ALIGN_PARENT_LEFT);
          }
        }
      }
      negativeButton.setLayoutParams(params);
    }
  }
  return true;
}
