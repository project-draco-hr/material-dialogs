{
  if (Looper.myLooper() != Looper.getMainLooper())   throw new IllegalStateException("You can only set the dialog's progress from the UI thread.");
 else   if (mBuilder.progress <= -2)   throw new IllegalStateException("Cannot use setMaxProgress() on this dialog.");
  mHandler.post(new Runnable(){
    @Override public void run(){
      mProgress.setMax(max);
    }
  }
);
}
