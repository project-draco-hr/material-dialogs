{
  builder.items(items);
  ArrayList<Integer> selectedIndices=new ArrayList<>();
  for (int i=0; i < checkedItems.length; i++) {
    if (checkedItems[i]) {
      selectedIndices.add(i);
    }
  }
  Integer selectedIndicesArr[]=new Integer[selectedIndices.size()];
  selectedIndices.toArray(selectedIndicesArr);
  builder.itemsCallbackMultiChoice(selectedIndicesArr,new MaterialDialog.ListCallbackMulti(){
    @Override public void onSelection(    MaterialDialog dialog,    Integer[] which,    CharSequence[] text){
      List<Integer> whichList=Arrays.asList(which);
      for (int i=0; i < checkedItems.length; i++) {
        boolean oldChecked=checkedItems[i];
        checkedItems[i]=whichList.contains(i);
        if (oldChecked != checkedItems[i]) {
          listener.onClick(dialog,i,checkedItems[i]);
        }
      }
    }
  }
);
  return this;
}
