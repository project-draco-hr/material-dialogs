{
  if (mimeType == null || mimeType.equals("*/*")) {
    return true;
  }
 else {
    String filename=file.toURI().toString();
    int dotPos=filename.lastIndexOf('.');
    if (dotPos == -1) {
      return false;
    }
    String fileExtension=filename.substring(dotPos + 1);
    String fileType=mimeTypeMap.getMimeTypeFromExtension(fileExtension);
    if (fileType == null) {
      return false;
    }
    if (fileType.equals(mimeType)) {
      return true;
    }
    int mimeTypeDelimiter=mimeType.lastIndexOf('/');
    if (mimeTypeDelimiter == -1) {
      return false;
    }
    String mimeTypeMainType=mimeType.substring(0,mimeTypeDelimiter);
    String mimeTypeSubtype=mimeType.substring(mimeTypeDelimiter + 1);
    if (!mimeTypeSubtype.equals("*")) {
      return false;
    }
    int fileTypeDelimiter=fileType.lastIndexOf('/');
    if (fileTypeDelimiter == -1) {
      return false;
    }
    String fileTypeMainType=fileType.substring(0,fileTypeDelimiter);
    if (fileTypeMainType.equals(mimeTypeMainType)) {
      return true;
    }
  }
  return false;
}
