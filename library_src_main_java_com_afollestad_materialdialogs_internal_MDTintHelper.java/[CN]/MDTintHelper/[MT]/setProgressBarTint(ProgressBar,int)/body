{
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    ColorStateList stateList=ColorStateList.valueOf(color);
    progressBar.setProgressTintList(stateList);
    progressBar.setSecondaryProgressTintList(stateList);
    progressBar.setIndeterminateTintList(stateList);
  }
 else {
    if (progressBar.getIndeterminateDrawable() != null)     progressBar.getIndeterminateDrawable().setColorFilter(color,PorterDuff.Mode.SRC_IN);
    if (progressBar.getProgressDrawable() != null)     progressBar.getProgressDrawable().setColorFilter(color,PorterDuff.Mode.SRC_IN);
  }
}
